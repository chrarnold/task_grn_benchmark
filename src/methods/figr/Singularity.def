BootStrap: docker
From: rocker/r-ver:4.1.0

%labels
    Author nourisa
    Version v1.0

%post
    # Update and install dependencies
    apt-get update && apt-get install -y \
        libcurl4-openssl-dev \
        libxml2-dev \
        libssl-dev \
        libhdf5-dev \
        wget \
        git

    # Install R packages from CRAN
    R -e "install.packages(c('dplyr', 'FNN', 'doParallel', 'BuenColors'), repos='http://cran.us.r-project.org')"

    # Install Bioconductor manager
    R -e "if (!requireNamespace('BiocManager', quietly = TRUE)) install.packages('BiocManager', repos='http://cran.us.r-project.org')"

    # Install packages from Bioconductor
    R -e "BiocManager::install(c('chromVAR', 'BSgenome.Hsapiens.UCSC.hg38'))"

    # Install FigR package from GitHub
    R -e "if (!requireNamespace('remotes', quietly = TRUE)) install.packages('remotes', repos='http://cran.us.r-project.org')"
    R -e "remotes::install_github('caleblareau/figr')"

    # Clean up
    apt-get clean

%files
    script.R script.R

%runscript
    Rscript script.R
